'use strict';function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e;}!function(){var e,n=location.href.split('/'),t=n.find(function(e){return e.startsWith('WB');}),o='#/'+n[n.length-1].replace(/(.html|.htm)/g,''),s=document.querySelector('.header-box header');null!==s&&new Vue((_defineProperty(e={el:'#submenu',data:{results:[],currentPage:'',activeIndex:0,isActive:!1},computed:{submenu:function(){return document.querySelector('.page-submenu');}},beforeDestroy:function(){window.removeEventListener('scroll',this.scrollHandler);},methods:{getData:function(){var e=this;fetch(''.concat('/tw/dsc/assets/submenu-spa/','submenu.json')).then(function(e){return e.json();}).then(function(n){e.results=n.filter(function(e){return e.id===t;}),e.results.length&&(e.setActiveIndex(),e.isActive=!0,e.results[0].anchors&&window.addEventListener('scroll',e.scrollHandler));});},setCurrentPage:function(e){e&&!e.match(/首頁$/)?this.currentPage=e:this.currentPage='';},setActiveIndex:function(){var e=this;this.results[0].menus.some(function(n,t){if(n.url===o)return e.activeIndex=t,e.setCurrentPage(n.text),!0;n.dropdowns&&n.dropdowns.forEach(function(n){n.url===o&&(e.activeIndex=t,e.setCurrentPage(n.text));});});},setTitle:function(e){return this.currentPage?''.concat(e,' / ').concat(this.currentPage):e;},getScrollPos:function(e,n,t){$(e).length&&($(window).scrollTop()>=$(e).offset().top-n&&t());},scrollHandler:function(){var e=this,n=this.results[0].anchors,t=this.submenu.offsetHeight;n.forEach(function(n){e.getScrollPos(n.url,t,function(){$(e.submenu).addClass('active').find('.page-submenu-list > li').removeClass('active').eq(n.index).addClass('active');});});},linkTo:function(e){var n=e.url,t=e.target,o=e.anchor;if(t)window.open(''.concat(n),t);else if(n&&!o)window.open(''.concat(n),'_self'),this.setPageInfo(n);else if(!n&&o){var s=$(o).offset().top,r=$('.page-submenu').outerHeight();$('html, body').animate({scrollTop:s-r});}else n&&o&&(window.open(''.concat(n),'_self'),setTimeout(function(){var e=$(o).offset().top,n=$('.page-submenu').outerHeight();$('html, body').animate({scrollTop:e-n});},100),this.setPageInfo(n));},setPageInfo:function(e){o=e,this.setActiveIndex();},openDropdown:function(e){$(e.target).parents('li').addClass('is-open').siblings().removeClass('is-open');},closeDropdownHandler:function(e){1!==$(e.target).parents('.page-submenubox').length&&$('.page-submenu-list > li').removeClass('is-open');}},created:function(){s.insertAdjacentHTML('beforeend','<div id="submenu"></div>'),this.getData();},mounted:function(){var e=this;document.querySelector('body').addEventListener('touchstart',function(n){return e.closeDropdownHandler(n);});}},'beforeDestroy',function(){document.querySelector('body').removeEventListener('touchstart');}),_defineProperty(e,'template','\n                <div class="page-submenubox" :class="{active:isActive}">\n                    <div class="page-submenu">\n                        <div class="container">\n                            <template v-for="result in results">\n                                <h2>{{setTitle(result.title)}}</h2>\n                                <ul class="page-submenu-list">\n                                    <li v-for="(menu, index) in result.menus">\n                                        <span :class="{active:index===activeIndex}">\n                                            <a :href="menu.url" @click.prevent="linkTo(menu)" @touchstart="openDropdown">{{menu.text}}</a>\n                                        </span>\n                                        <ul v-if="menu.dropdowns" class="page-submenu-dropdown">\n                                            <li v-for="dropdown in menu.dropdowns">\n                                                <a :href="dropdown.url" @click.prevent="linkTo(dropdown)">{{dropdown.text}}</a>\n                                            </li>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            '),e));}();