'use strict';!function(){var e=location.pathname.split('/'),n=location.hash,t=e[e.length-2],s=e[e.length-1].replace(/(.html|.htm)/g,''),r=document.querySelector('.header-box header');null!==r&&new Vue({el:'#submenu',data:{results:[],currentPage:'',activeIndex:0,isActive:!1},computed:{submenu:function(){return document.querySelector('.page-submenu');}},created:function(){r.insertAdjacentHTML('beforeend','<div id="submenu"></div>'),this.getData();},beforeDestroy:function(){window.removeEventListener('scroll',this.scrollHandler);},methods:{getData:function(){var e=this;fetch(''.concat('/tw/dsc/assets/submenu/','submenu.json')).then(function(e){return e.json();}).then(function(n){e.results=n.filter(function(e){return e.id===t;}),e.results.length&&(e.setActiveIndex(),e.isActive=!0,e.results[0].anchors&&window.addEventListener('scroll',e.scrollHandler));});},setCurrentPage:function(e){e&&!e.match(/首頁$/)&&(this.currentPage=e);},setActiveIndex:function(){var e=this;this.results[0].menus.forEach(function(t,r){t.url===s||t.url===s+n?(e.activeIndex=r,e.setCurrentPage(t.text)):t.dropdowns&&t.dropdowns.forEach(function(t){t.url===s+n&&(e.activeIndex=r,e.setCurrentPage(t.text));});});},setTitle:function(e){return this.currentPage?''.concat(e,' / ').concat(this.currentPage):e;},linkTo:function(e,n){var t=e.split('#');if(''===t[0]||t[0]===s){var r=$('#'.concat(t[1]));if(r.length){var o=r.offset().top;$('html, body').animate({scrollTop:o-50});}}else n?window.open(e,n):window.open(e,'_self');},getScrollPos:function(e,n,t){$(e).length&&($(window).scrollTop()>=$(e).offset().top-n&&t());},scrollHandler:function(){var e=this,n=this.results[0].anchors,t=this.submenu.offsetHeight;n.forEach(function(n){e.getScrollPos(n.url,t,function(){$(e.submenu).addClass('active').find('.page-submenu-list > li').removeClass('active').eq(n.index).addClass('active');});});}},template:'\n                <div class="page-submenubox" :class="{active:isActive}">\n                    <div class="page-submenu">\n                        <div class="container">\n                            <template v-for="result in results">\n                                <h2>{{setTitle(result.title)}}</h2>\n                                <ul class="page-submenu-list">\n                                    <li v-for="(menu, index) in result.menus">\n                                        <span :class="{active:index===activeIndex}">\n                                            <a :href="menu.url" @click.prevent="linkTo(menu.url, menu.target)">{{menu.text}}</a>\n                                        </span>\n                                        <ul v-if="menu.dropdowns" class="page-submenu-dropdown">\n                                            <li v-for="dropdown in menu.dropdowns">\n                                                <a :href="dropdown.url" @click.prevent="linkTo(dropdown.url, dropdown.target)">{{dropdown.text}}</a>\n                                            </li>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            '});}();