'use strict';function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}(function(){// dev
// let dir = '';
// let path = '/tw/dsc/solution/mobile/WB002839/index#/merchandise'.split('/');
// let hash = '';
// final
var a=location.href.split('/'),b=a.find(function(a){return a.startsWith('WB')}),c='#/'+a[a.length-1].replace(/(.html|.htm)/g,''),d=document.querySelector('.header-box header');if(null!==d){var e;new Vue((e={el:'#submenu',data:{results:[],currentPage:'',activeIndex:0,isActive:!1},computed:{submenu:function a(){return document.querySelector('.page-submenu')}},beforeDestroy:function a(){window.removeEventListener('scroll',this.scrollHandler)},methods:{// 取得選單內容
getData:function c(){var a=this;fetch('/tw/dsc/assets/submenu-spa/submenu.json').then(function(a){return a.json()}).then(function(c){a.results=c.filter(function(a){return a.id===b});a.results.length&&(// 依據選單高度設定main上方間距
a.setActiveIndex(),a.isActive=!0,window.addEventListener('load',a.resizeHandler),window.addEventListener('resize',a.resizeHandler),a.results[0].anchors&&window.addEventListener('scroll',a.scrollHandler))})},// 設定目前頁面名稱(不含首頁)
setCurrentPage:function b(a){this.currentPage=a&&!a.match(/首頁$/)?a:''},// 設定目前選單樣式
setActiveIndex:function b(){var a=this;this.results[0].menus.some(function(b,d){return b.url===c?(a.activeIndex=d,a.setCurrentPage(b.text),!0):void(b.dropdowns&&b.dropdowns.forEach(function(b){b.url===c&&(a.activeIndex=d,a.setCurrentPage(b.text))}))})},// 設定標題文字
setTitle:function b(a){return this.currentPage?a+' / '+this.currentPage:a},getScrollPos:function f(a,b,c){if($(a).length){var d=$(window).scrollTop(),e=$(a).offset().top-b;d>=e&&c()}},scrollHandler:function d(){var a=this,b=this.results[0].anchors,c=this.submenu.offsetHeight;b.forEach(function(b){a.getScrollPos(b.url,c,function(){$(a.submenu).addClass('active').find('.page-submenu-list > li').removeClass('active').eq(b.index).addClass('active')})})},// 判斷連結開啟方式
linkTo:function g(a){var b=a.url,c=a.target,d=a.anchor;if(c)window.open(''+b,c);else if(b&&!d)window.open(''+b,'_self'),this.setPageInfo(b);else if(!b&&d){var e=$(d).offset().top,f=$('.page-submenu').outerHeight();$('html, body').animate({scrollTop:e-f})}else b&&d&&(window.open(''+b,'_self'),setTimeout(function(){var a=$(d).offset().top,b=$('.page-submenu').outerHeight();$('html, body').animate({scrollTop:a-b})},100),this.setPageInfo(b))},// 設定頁面資訊
setPageInfo:function b(a){c=a,this.setActiveIndex()},openDropdown:function b(a){$(a.target).parents('li').addClass('is-open').siblings().removeClass('is-open')},closeDropdownHandler:function b(a){1!==$(a.target).parents('.page-submenubox').length&&$('.page-submenu-list > li').removeClass('is-open')},resizeHandler:function c(){var a=this.submenu.offsetHeight,b=document.querySelector('main');null===b||(b.style.paddingTop=50<a?'50px':0)}},created:function a(){d.insertAdjacentHTML('beforeend','<div id="submenu"></div>'),this.getData()},mounted:function b(){var a=this;document.querySelector('body').addEventListener('touchstart',function(b){return a.closeDropdownHandler(b)})}},_defineProperty(e,'beforeDestroy',function a(){document.querySelector('body').removeEventListener('touchstart')}),_defineProperty(e,'template','\n                <div class="page-submenubox" :class="{active:isActive}">\n                    <div class="page-submenu">\n                        <div class="container">\n                            <template v-for="result in results">\n                                <h2>{{setTitle(result.title)}}</h2>\n                                <ul class="page-submenu-list">\n                                    <li v-for="(menu, index) in result.menus">\n                                        <span :class="{active:index===activeIndex}">\n                                            <a :href="menu.url" @click.prevent="linkTo(menu)" @touchstart="openDropdown">{{menu.text}}</a>\n                                        </span>\n                                        <ul v-if="menu.dropdowns" class="page-submenu-dropdown">\n                                            <li v-for="dropdown in menu.dropdowns">\n                                                <a :href="dropdown.url" @click.prevent="linkTo(dropdown)">{{dropdown.text}}</a>\n                                            </li>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            '),e))}})();
