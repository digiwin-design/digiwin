!function(){let e=location.pathname.split('/'),t=location.hash,n=e[e.length-2],s=e[e.length-1].replace(/(.html|.htm)/g,''),i=document.querySelector('.header-box header');null!==i&&new Vue({el:'#submenu',data:{results:[],currentPage:'',activeIndex:0,isActive:!1},created(){i.insertAdjacentHTML('beforeend','<div id="submenu"></div>'),this.getData();},methods:{getData(){fetch('/tw/dsc/dev/assets/submenu/submenu.json').then(e=>e.json()).then(e=>{this.results=e.filter(e=>e.id===n),this.results.length&&(this.setActiveIndex(),this.isActive=!0);});},setCurrentPage(e){e&&!e.match(/首頁$/)&&(this.currentPage=e);},setActiveIndex(){this.results[0].menus.forEach((e,n)=>{e.url===s||e.url===s+t?(this.activeIndex=n,this.setCurrentPage(e.text)):e.dropdowns&&e.dropdowns.forEach(e=>{e.url===s+t&&(this.activeIndex=n,this.setCurrentPage(e.text));});});},setTitle(e){return this.currentPage?`${e} / ${this.currentPage}`:e;},linkTo(e,t){let n=e.split('#');if(''===n[0]||n[0]===s){let e=$(`#${n[1]}`);if(e.length){let t=e.offset().top;$('html, body').animate({scrollTop:t-50});}}else t?window.open(e,t):window.open(e,'_self');}},template:'\n                <div class="page-submenubox" :class="{active:isActive}">\n                    <div class="page-submenu">\n                        <div class="container">\n                            <template v-for="result in results">\n                                <h2>{{setTitle(result.title)}}</h2>\n                                <ul class="page-submenu-list">\n                                    <li v-for="(menu, index) in result.menus">\n                                        <span :class="{active:index===activeIndex}">\n                                            <a :href="menu.url" @click.prevent="linkTo(menu.url, menu.target)">{{menu.text}}</a>\n                                        </span>\n                                        <ul v-if="menu.dropdowns" class="page-submenu-dropdown">\n                                            <li v-for="dropdown in menu.dropdowns">\n                                                <a :href="dropdown.url" @click.prevent="linkTo(dropdown.url, dropdown.target)">{{dropdown.text}}</a>\n                                            </li>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            '});}();